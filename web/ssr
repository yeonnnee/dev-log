# 서버 사이드 렌더링(SSR) 이란

<br />

#### What?


- SSR은 필요한 모든 HTML페이지를 서버에서 생성해 렌더링하는 방식이다. 

- 페이지는 HTML만으로 구성되므로 Javscript가 비활성화 되어도 화면을 표시해 줄 수 있다.

- Javscript가 실행되지 않으므로 브라우저 이벤트를 처리할 수 없다. 

<br />

#### Why?


SPA는 실제로 다운로드 받는 페이지는 단 1개이고 그 이후 JavaScript를 통해 동적인 렌더링을 실시하는 어플리케이션이다. <br />
초기 로딩시 모든 정적 리소스를 내려받은 후에는 페이지 이동 시 필요한 데이터만 내려받는다. <br />

페이지 이동 시 새로고침이 되지 않으므로 사용자 경험(UX)가 향상되는 장점이 있지만 초기 로딩 속도가 느리고 SEO에 취약한 단점을 가지고 있다. 이러한 단점을 보완하고자 SSR 방식을 사용하게 되었다.
 
<br />

> SEO 대응


소셜 미디어 사이트는 컨텐츠를 수집하고 검색에 활용하기 위해 웹 크롤러를 사용한다. <br />
CSR은 사용자가 사이트에 접속하면 사이트로부터 `html`, `js`, `css`를 받아서 브라우저에 렌더링을 하게 된다.  `js` 파일의 다운로드가 완료된 다음, 해당 `js` 파일이 dom을 빈 `html` 위에 그리기 시작하기에 최초로 불러온 `html`의 내용은 비어있다.  (html, body 태그만 존재) <br />

<br />

그러다 보니, 일부 Javascript 를 지원하지 않는 사이트에서는 Javascript를 실행시키지 않아 렌더링된 화면을 볼 수 없다. 이렇게 되면 빈 화면이기 때문에 웹크롤러에 걸리지 않게 되면서 SEO 문제가 발생하게 된다. <br/>

SSR은 Javascript없이도 페이지를 전환할 수 있고, 웹사이트의 미리보기 화면을 제공할 수 있기 때문에 SEO 대응을 위해 사용된다.

-> 새로운 페이지로 이동을 하더라도 html 자체가 바뀌는 것이 아니라 JavaScript 차원에서 새로운 화면을 그려내는 것이기 때문에 Javascript가 실행되지 않으면 브라우저 이벤트를 처리할 수 없으므로 angular 는 `routerLink`를 사용하는 방식으로 구현 next.js는 `Link`를 사용하는 방식으로 구현

<br />

>모바일 장비와 저사양 장비에서 동작하는 성능을 끌어올리기 위해

일부 Javascript 를 지원하지 않는 기기나 브라우저에서는 화면 자체를 렌더링 하지 않기때문에 기능은 그대로 사용하지 못하더라도 화면을 보여주기위해 SSR 방식을 사용하곤 한다. 

<br />

>사용자에게 유효한 첫페이지를 빠르게 표시하기 위해


SSR은 필요한 모든 페이지를 서버에서 생성해 렌더링 하므로 Javascript가 클라이언트에 많은 요청을 보내는 것을 막을 수 있으며, 초기 로딩속도가 빨라 더 나은 UX를 제공해 줄 수 있다.


<br />
<br />

#### SSR의 문제점

요즘에는 SSR 방식과 CSR 방식 모두를 지원하는 Universal Rendering 방식을 사용하여 개발한다. 최초 진입시에만 SSR 화면을 먼저 보여준 다음 js 다운받고 페이지 변경이 있으면 CSR 로 변경이된다. 해당방식으로 개발하면 SPA의 느린 초기로딩 속도와 SEO 문제점을 보완하면서도 페이지 전환이 빠른 SPA의 장점을 유지할 수 있다. <br />
하지만, ssr로 렌더링된 화면은 서버에서 미리 만들어둔 렌더링 화면을 보여주지만 사용자 쪽에는 아직 다운받은 내용은 없는 것이다. (SSR 화면을 원본보기 하면 아무것도 없다.)
<br />
이렇게 되면 몇가지 문제가 있는데, 브라우저에서 동작하는 함수를 사용하게 되면 에러가 발생하게 된다. (alert, confirm… )

→ Angular에서는  `isPlatformBrowser`  로 해당 페이지가 CSR 인지 SSR인지 확인하여 처리해줌


<br />
<br />

#### How?

Angular 는 Angular Universal 이라는 테크닉을 사용하여 구현하며, React의 경우 Next.js, 
ReactDOMServer 를 사용하여 SSR 구현을 할 수 있다.
